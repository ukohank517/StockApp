# StockAppコード

### 機能

-   作業 DB 管理

    -   業務管理 DB 業務 DB を上げる場所、入荷出荷、荷物転送 作業ではここの DB を基準にして確認する
    -   SKU 互換 DB 今では使用していないが、amazon で登録する SKU が jan と一致していない場合もあるので、その場合にここを登録することによって「A を入力したが、それを B として認識する」のような動作が可能。
    -   地代コード DB 国コードと地代コードを登録する場所

-   在庫&受発注

    -   レポート (実装する予定)現在の在庫数によって在庫補充の通知や、売り上げ統計の可視化などを実装する予定
    -   発注書更新 発注書を追加する場所
    -   受注関連 検索 sku と表示してるが、jan の入力である。 検索する jan を注文商品として入ってる注文書を絞り込んで入荷処理をする。
    -   DB 更新&確認 sku-jan 関連の追加、yello,red の判断基準、在庫表の確認がここより処理する。

-   入荷出荷 作業
    
    -   通常提案処理 入荷 作業の内容、在庫商品の発注をどんどん提案して、作業を促す。0 在庫を無視する機能を実装する予定。
    -   行指定処理 実装予定。強制で行番号を指定して、その行に関連する在庫商品を用意して出荷する。(主に 転送商品 との抱き合わせの処理時に使用)

-   転送 作業

    -   転送作業はメーカーから入荷したものを客へ送る作業
    -   業務ページ 転送 処理ページ
    -   Box 指定印刷 入出荷 でも 転送 でも、boxNo を指定すれば、その box に関連する greenlabel, invoice を再印刷する機能
    -   単品処理 強制単品を出荷する。(通常は 16 商品 1box で初めて出荷だが、この処理だと 1 商品でも専用 greenbox)
    -   情報検索 業務 DB を検索する機能、情報確認する時に使用。
    

### Database

#### ordersheets: 注文票の集合

| カラム名        | 値                                                                                                                                                  |
| --------------- | --------------------------------------------------------------------------------------------------------------------------------------------------- |
| date            | 注文受けた日にち                                                                                                                                    |
| box             | 発注する時の box 名                                                                                                                                 |
| id_in_box       | box の中の順番番号                                                                                                                                  |
| sku             | 商品 SKU、検索時に使用                                                                                                                              |
| line            | 行番号、spreadsheet の者                                                                                                                            |
| stock_stat      | 在庫なら、入出荷処理、それ以外は転送処理                                                                                                            |
| sendway         | 発送方法、特殊な方法の場合は警告を出すように                                                                                                        |
| order_id        | 発注番号                                                                                                                                            |
| customer_name   | お客さんの名前                                                                                                                                      |
| adress1~adress4 | 個人情報                                                                                                                                            |
| postid          | 個人情報                                                                                                                                            |
| country         | 個人情報                                                                                                                                            |
| country_code    | 個人情報                                                                                                                                            |
| phone_number    | 個人情報                                                                                                                                            |
| goods_name      | 注文品の名前                                                                                                                                        |
| aim_num         | 注文数                                                                                                                                              |
| stock_num       | 現在の処理数                                                                                                                                        |
| plural_marker   | orderid 見たいなものですが、でも同じ人が二回注文したら、この行でそれらをまとめてくれる素晴らしい行である よって同じ注文はこの行を見て判断するように |
| wait_box        | 同じ人がいっぱい注文したら、一部しか処理してないので、処理したものをこの待ちボックスを振り分けてあげる（実際では 作業者してないみたいだが）         |

#### params: 設定用パラメータ(管理者用)

| カラム名             | 値                                                               |
| -------------------- | ---------------------------------------------------------------- |
| max_goods_in_box     | 発注ボックス内の最大商品数                                       |
| delay_days           | 注文日と作業日がこれ以上差があると、早く発送してと促すように処理 |
| max_box_name         | 発送ボックスの最大値                                             |
| max_wait_name        | 待ちボックスの最大値                                             |
| box_name_index       | 次に使用する発送ボックスの名前                                   |
| wait_name_index      | 次に使用する待ちボックスの名前                                   |
| floor_three_box_name | 出荷で使用するボックスの名前                                     |

#### itemsborders: 商品の警告ラインを設定するパラメータ

| カラム名      | 値            |
| ------------- | ------------- |
| parent_sku    | 在庫商品 sku  |
| yellow_border | yellow 警告量 |
| red_border    | red 警告量    |

#### itemrelations: sku,jan,個数などの関連性を保存するデータベース(親 sku A _ n + 親 sku B _ m = 子 sku)

| カラム名   | 値      |
| ---------- | ------- |
| parent_sku | 親 sku  |
| child_sku  | 子 sku  |
| parent_num | 親数    |
| child_jan  | 子 jan  |
| child_asin | 子 asin |

#### orderdocuments: 発注書 DB

| カラム名      | 値             |
| ------------- | -------------- |
| doc_id        | 発注書 ID      |
| order_date    | 発注日         |
| parent_sku    | 発注商品       |
| parent_num    | 発注商品数     |
| supplier      | 仕入先         |
| price         | 仕入れな弾     |
| warehouse     | 入荷先         |
| product_place | 保存場所       |
| memo          | メモ           |
| done          | 処理したか否か |

#### stockitems: 在庫表、入荷する際に更新される

| カラム名   | 値       |
| ---------- | -------- |
| parent_sku | 商品 sku |
| name       | 商品名   |
| stock_num  | 在庫数   |
| price      | 発注金額 |
| place      | 発注先   |
| memo       | メモ     |

### Route:全てGET. 大目に